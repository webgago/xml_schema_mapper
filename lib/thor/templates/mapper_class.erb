# encoding: utf-8
# @note <%= type.annotation.to_s.gsub("\n", "\n# ") %>

<% elements.each do |element| %>
<%= element_annotation(element) %>
<%- end -%>

class <%= mapper_name %>
  include XmlSchemaMapper
  schema '<%= schema_path %>'
  type '<%= name %>'

<% elements.each do |element| %>
  <%= element_annotation(element) %>
  attr_accessor :<%= element.name.underscore %>
<% end %>

<% unless subclasses.empty? -%>
  <% subclasses.each do |subclass, type| %>
  class <%= subclass %>
    include XmlSchemaMapper
    schema '<%= schema_path %>'
    annonymus_type '<%= [name.camelize, subclass].join('::') %>'

    <%  type.elements.values.each do |element| %>
    <%= element_annotation(element) %>
    attr_accessor :<%= element.name.underscore %>
    <%- end -%>
  end
  <% end %>
<% end -%>
end